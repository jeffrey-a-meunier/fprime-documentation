ThrusterController.fpp

    # @ Example port: receiving calls from the rate group
    async input port run: Svc.Sched

ThrusterController.hpp-txt -> ThrusterController.hpp

    //! Handler implementation for run
    //!
    void run_handler(
        const NATIVE_INT_TYPE portNum, /*!< The port number*/
        NATIVE_UINT_TYPE context /*!< 
    The call order
    */
    );

ThrusterController.cpp-txt -> ThrusterController.cpp


ThrusterController.cpp

  void ThrusterController ::
    SetPowerLevel_cmdHandler(
        const FwOpcodeType opCode,
        const U32 cmdSeq,
        Components::ThrusterController_PowerLevelPreset level
    )
  {
    static const U8 presetPercents[] = {0, 25, 50, 75, 100};
    const U8 presetPercent = presetPercents[level.e];
    // PowerLevelCommand_out(0, presetPercent);
    m_targetPercent = presetPercent;
    this->cmdResponse_out(opCode, cmdSeq,Fw::CmdResponse::OK);
  }

   void ThrusterController ::
    run_handler(
        const NATIVE_INT_TYPE portNum,
        NATIVE_UINT_TYPE context
    )
  {
    I16 delta = m_targetPercent - m_currentPercent;
    if (delta > 10) {
      delta = 10;
    }
    else if (delta < -10) {
      delta = -10;
    }
    m_currentPercent += delta;
    if (delta != 0) {
      PowerLevelCommand_out(0, m_currentPercent);
    }
  }

topology.fpp

    connections SpacecraftDeployment {
      # Add here connections to user-defined components
      thrusterController.PowerLevelCommand -> thruster.SetPowerLevel
      rateGroup1.RateGroupMemberOut[3] -> thrusterController.run
    }

